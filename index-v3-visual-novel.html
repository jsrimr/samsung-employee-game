<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹ ì…ì‚¬ì› í‚¤ìš°ê¸° - ì‹ ì…ì‚¬ì› í•˜ë‚˜ë¥¼ í‚¤ìš°ëŠ” ë°ëŠ” ì˜¨ ë§ˆì„ì´ í•„ìš”í•˜ë‹¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            background: #000;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: #fff;
            border: 8px solid #222;
            box-shadow: 0 0 0 4px #444, 0 20px 60px rgba(0, 0, 0, 0.8);
            max-width: 1000px;
            width: 100%;
            overflow: hidden;
        }

        .game-header {
            background: linear-gradient(135deg, #034ea2 0%, #0066cc 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .game-title-small {
            font-size: 18px;
            font-weight: bold;
        }

        .music-control {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            padding: 15px 25px;
            background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);
            border-bottom: 2px solid #034ea2;
        }

        .stat-mini {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-mini-label {
            font-size: 12px;
            font-weight: 700;
            color: #666;
        }

        .stat-mini-value {
            font-size: 16px;
            font-weight: bold;
            color: #034ea2;
        }

        .stat-mini-bar {
            flex: 1;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid #ccc;
        }

        .stat-mini-fill {
            height: 100%;
            background: linear-gradient(90deg, #034ea2, #0066cc);
            transition: width 0.5s;
        }

        .info-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 25px;
            background: white;
            border-bottom: 2px solid #034ea2;
            font-size: 13px;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .info-label {
            color: #666;
            font-weight: 600;
        }

        .info-value {
            color: #034ea2;
            font-weight: bold;
        }

        .rank-badge {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            padding: 3px 10px;
            border-radius: 10px;
            font-weight: bold;
            border: 1px solid #d4af37;
        }

        /* ë¹„ì£¼ì–¼ ë…¸ë²¨ ìŠ¤íƒ€ì¼ */
        .visual-novel-scene {
            min-height: 500px;
            background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .character-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding: 40px;
            position: relative;
        }

        /* ìºë¦­í„° ì•„ë°”íƒ€ */
        .character-avatar {
            width: 220px;
            height: 220px;
            position: relative;
            animation: fadeIn 0.5s, characterFloat 3s ease-in-out infinite;
        }

        @keyframes characterFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .character-body {
            width: 180px;
            height: 180px;
            margin: 0 auto;
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), inset 0 -5px 20px rgba(0, 0, 0, 0.2);
            border: 6px solid #fff;
        }

        .character-body::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 50%;
            bottom: 50%;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 100%);
            pointer-events: none;
        }

        /* ì£¼ì¸ê³µ */
        .char-player .character-body {
            background: linear-gradient(135deg, #034ea2 0%, #0066cc 50%, #003d7a 100%);
            border-color: #0066cc;
        }

        .char-player .character-body::before {
            content: 'ğŸ˜Š';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        /* ë©´ì ‘ê´€ */
        .char-interviewer .character-body {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 50%, #000 100%);
            border-color: #444;
        }

        .char-interviewer .character-body::before {
            content: 'ğŸ˜';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        /* ê¹€ëŒ€ë¦¬ */
        .char-kim .character-body {
            background: linear-gradient(135deg, #4a6fa5 0%, #2e5a8a 50%, #1a3d5c 100%);
            border-color: #4a6fa5;
        }

        .char-kim .character-body::before {
            content: 'ğŸ˜¤';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        /* ì„œì—° */
        .char-seoyeon .character-body {
            background: linear-gradient(135deg, #ffb6c1 0%, #ff69b4 50%, #ff1493 100%);
            border-color: #ffb6c1;
        }

        .char-seoyeon .character-body::before {
            content: 'ğŸ’•';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        /* í•˜ì´ë‹‰ìŠ¤ ì¹œêµ¬ */
        .char-rival .character-body {
            background: linear-gradient(135deg, #dc143c 0%, #8b0000 50%, #4a0000 100%);
            border-color: #dc143c;
        }

        .char-rival .character-body::before {
            content: 'ğŸ˜';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        /* CEO/ì„ì› */
        .char-executive .character-body {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
            border-color: #FFD700;
        }

        .char-executive .character-body::before {
            content: 'ğŸ‘”';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        /* ìƒì‚¬/íŒ€ì¥ */
        .char-boss .character-body {
            background: linear-gradient(135deg, #708090 0%, #2f4f4f 50%, #1c2f2f 100%);
            border-color: #708090;
        }

        .char-boss .character-body::before {
            content: 'ğŸ˜ ';
            font-size: 90px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        .character-name {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            border: 3px solid #000;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        /* ë§í’ì„  ëŒ€í™”ì°½ */
        .dialogue-container {
            padding: 20px 30px 30px;
            background: rgba(255, 255, 255, 0.95);
        }

        .dialogue-box {
            background: white;
            border: 4px solid #000;
            border-radius: 15px;
            padding: 25px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-height: 120px;
        }

        .dialogue-box::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50px;
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 20px solid #000;
        }

        .dialogue-box::after {
            content: '';
            position: absolute;
            top: -13px;
            left: 54px;
            width: 0;
            height: 0;
            border-left: 16px solid transparent;
            border-right: 16px solid transparent;
            border-bottom: 16px solid white;
        }

        .dialogue-speaker {
            font-size: 16px;
            font-weight: bold;
            color: #034ea2;
            margin-bottom: 10px;
        }

        .dialogue-text {
            font-size: 17px;
            line-height: 1.8;
            color: #222;
        }

        .dialogue-continue {
            position: absolute;
            bottom: 10px;
            right: 15px;
            color: #034ea2;
            font-size: 16px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* ì„ íƒì§€ */
        .choices-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .choice-button {
            background: white;
            border: 4px solid #034ea2;
            color: #034ea2;
            padding: 18px 25px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            font-weight: 700;
            box-shadow: 4px 4px 0 rgba(3, 78, 162, 0.3);
        }

        .choice-button::before {
            content: 'â–¶ ';
            opacity: 0;
            transition: opacity 0.3s;
        }

        .choice-button:hover::before {
            opacity: 1;
        }

        .choice-button:hover {
            background: #034ea2;
            color: white;
            transform: translateX(5px);
        }

        .choice-button:active {
            transform: translateX(5px) translateY(2px);
            box-shadow: 2px 2px 0 rgba(3, 78, 162, 0.3);
        }

        .choice-effect {
            display: block;
            font-size: 12px;
            margin-top: 8px;
            opacity: 0.8;
            font-weight: normal;
        }

        .start-screen {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
        }

        .start-title {
            font-size: 36px;
            font-weight: bold;
            color: #034ea2;
            margin-bottom: 20px;
        }

        .start-description {
            font-size: 17px;
            color: #333;
            line-height: 1.9;
            margin-bottom: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .start-button {
            background: linear-gradient(135deg, #034ea2, #0066cc);
            color: white;
            border: 4px solid #222;
            padding: 20px 50px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.3);
            text-transform: uppercase;
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.3);
        }

        .promotion-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.5s;
        }

        .promotion-content {
            background: white;
            border: 8px solid #ffd700;
            padding: 60px;
            border-radius: 20px;
            text-align: center;
            animation: promotionPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes promotionPop {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        .promotion-text {
            font-size: 32px;
            font-weight: bold;
            color: #034ea2;
            margin-bottom: 20px;
        }

        .promotion-rank {
            font-size: 48px;
            font-weight: bold;
            color: #ffd700;
        }

        .promotion-bonus {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin-top: 20px;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .game-over-panel, .ending-panel {
            text-align: center;
            padding: 60px 40px;
            background: white;
        }

        .game-over-title {
            font-size: 42px;
            font-weight: bold;
            color: #dc3545;
            margin-bottom: 20px;
        }

        .ending-title {
            font-size: 42px;
            font-weight: bold;
            color: #034ea2;
            margin-bottom: 20px;
        }

        .game-over-reason, .ending-description {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .restart-button {
            background: linear-gradient(135deg, #034ea2, #0066cc);
            color: white;
            border: 4px solid #222;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
        }

        .restart-button:hover {
            transform: translateY(-2px);
            box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.3);
        }

        .hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @media (max-width: 768px) {
            .character-avatar {
                width: 150px;
                height: 200px;
            }

            .character-body::before {
                font-size: 40px !important;
                top: 20px !important;
            }

            .dialogue-box {
                padding: 20px;
            }

            .choice-button {
                padding: 15px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <div class="game-title-small">ì‹ ì…ì‚¬ì› í‚¤ìš°ê¸°</div>
            <button class="music-control" id="musicToggle" onclick="toggleMusic()">ğŸ”Š ìŒì•… ON</button>
        </div>

        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="startScreen" class="start-screen">
            <div class="start-title">ğŸ¢ ì‹ ì…ì‚¬ì› í‚¤ìš°ê¸°</div>
            <div class="start-description">
                <strong>ì‹ ì…ì‚¬ì› í•˜ë‚˜ë¥¼ í‚¤ìš°ëŠ” ë°ëŠ” ì˜¨ ë§ˆì„ì´ í•„ìš”í•˜ë‹¤</strong><br><br>
                ì‚¼ì„±ì „ì ì‹ ì…ì‚¬ì›ìœ¼ë¡œ ì…ì‚¬í•˜ì—¬ ì„ì›ê¹Œì§€ ìŠ¹ì§„í•˜ê³ ,<br>
                ì°¨ì„¸ëŒ€ ë©”ëª¨ë¦¬ ë°˜ë„ì²´ HBM4ë¥¼ ê°œë°œí•˜ì—¬<br>
                íšŒì‚¬ë¥¼ ì‹œê°€ì´ì•¡ ì²œì¡°ì› ê¸°ì—…ìœ¼ë¡œ ì„±ì¥ì‹œí‚¤ì„¸ìš”!<br><br>
                <strong>âš ï¸ ì—…ë¬´ëŠ¥ë ¥, ì¸ë§¥, ì²´ë ¥ ì¤‘ í•˜ë‚˜ë¼ë„ 0ì´ ë˜ë©´ ê²Œì„ì˜¤ë²„!</strong>
            </div>
            <button class="start-button" onclick="startGame()">Press Start</button>
        </div>

        <!-- ê²Œì„ ë©”ì¸ í™”ë©´ -->
        <div id="gameScreen" class="hidden">
            <!-- ìŠ¤íƒ¯ ë°” -->
            <div class="stats-bar">
                <div class="stat-mini">
                    <span class="stat-mini-label">ğŸ’¼</span>
                    <span class="stat-mini-value" id="workStat">50</span>
                    <div class="stat-mini-bar">
                        <div class="stat-mini-fill" id="workBar" style="width: 50%"></div>
                    </div>
                </div>
                <div class="stat-mini">
                    <span class="stat-mini-label">ğŸ¤</span>
                    <span class="stat-mini-value" id="networkStat">50</span>
                    <div class="stat-mini-bar">
                        <div class="stat-mini-fill" id="networkBar" style="width: 50%"></div>
                    </div>
                </div>
                <div class="stat-mini">
                    <span class="stat-mini-label">â¤ï¸</span>
                    <span class="stat-mini-value" id="healthStat">50</span>
                    <div class="stat-mini-bar">
                        <div class="stat-mini-fill" id="healthBar" style="width: 50%"></div>
                    </div>
                </div>
            </div>

            <!-- ì •ë³´ ë°” -->
            <div class="info-bar">
                <div class="info-item">
                    <span class="info-label">ì§ê¸‰:</span>
                    <span class="rank-badge" id="currentRank">ë©´ì ‘</span>
                </div>
                <div class="info-item">
                    <span class="info-label">HBM:</span>
                    <span class="info-value" id="hbmProgress">ì¤€ë¹„ ì¤‘</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ì‹œê°€ì´ì•¡:</span>
                    <span class="info-value" id="marketCap">300ì¡°ì›</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ì§„í–‰ë„:</span>
                    <span class="info-value" id="eventProgress">0/1</span>
                </div>
            </div>

            <!-- ë¹„ì£¼ì–¼ ë…¸ë²¨ ì”¬ -->
            <div class="visual-novel-scene">
                <div class="character-container" id="characterContainer">
                    <!-- ìºë¦­í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>

                <div class="dialogue-container">
                    <div class="dialogue-box">
                        <div class="dialogue-speaker" id="speakerName">í™”ì</div>
                        <div class="dialogue-text" id="dialogueText">ëŒ€í™” ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                        <div class="dialogue-continue">â–¼</div>
                    </div>

                    <div class="choices-container" id="choicesContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Web Audio
        let audioContext;
        let musicPlaying = false;

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playNote(frequency, startTime, duration) {
            const osc = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            osc.type = 'square';
            osc.frequency.value = frequency;

            gainNode.gain.setValueAtTime(0.1, startTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);

            osc.connect(gainNode);
            gainNode.connect(audioContext.destination);

            osc.start(startTime);
            osc.stop(startTime + duration);
        }

        let musicLoopInterval;
        let currentMusicType = 'normal'; // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ìŒì•… íƒ€ì…

        // ìŒì•… íƒ€ì…ë³„ ë©œë¡œë”” ì •ì˜
        const musicMelodies = {
            normal: [
                // í‰ìƒì‹œ ìŒì•… - ë°ê³  ê²½ì¾Œí•œ ë©œë¡œë””
                { freq: 523.25, time: 0.0, dur: 0.3 },   // C
                { freq: 659.25, time: 0.3, dur: 0.3 },   // E
                { freq: 783.99, time: 0.6, dur: 0.3 },   // G
                { freq: 659.25, time: 0.9, dur: 0.3 },   // E
                { freq: 523.25, time: 1.2, dur: 0.6 },   // C (ê¸¸ê²Œ)

                { freq: 587.33, time: 2.0, dur: 0.3 },   // D
                { freq: 698.46, time: 2.3, dur: 0.3 },   // F
                { freq: 830.61, time: 2.6, dur: 0.3 },   // G#
                { freq: 698.46, time: 2.9, dur: 0.3 },   // F
                { freq: 587.33, time: 3.2, dur: 0.6 },   // D (ê¸¸ê²Œ)

                { freq: 659.25, time: 4.0, dur: 0.3 },   // E
                { freq: 783.99, time: 4.3, dur: 0.3 },   // G
                { freq: 880.00, time: 4.6, dur: 0.3 },   // A
                { freq: 783.99, time: 4.9, dur: 0.3 },   // G
                { freq: 659.25, time: 5.2, dur: 0.6 },   // E (ê¸¸ê²Œ)

                { freq: 698.46, time: 6.0, dur: 0.3 },   // F
                { freq: 587.33, time: 6.3, dur: 0.3 },   // D
                { freq: 523.25, time: 6.6, dur: 0.9 },   // C (ë§¤ìš° ê¸¸ê²Œ)
            ],
            crisis: [
                // ìœ„ê¸° ìŒì•… - ê¸´ì¥ê° ìˆëŠ” ë‚®ì€ ìŒê³¼ ë¹ ë¥¸ í…œí¬
                { freq: 329.63, time: 0.0, dur: 0.2 },   // E (ë‚®ì€ ì˜¥íƒ€ë¸Œ)
                { freq: 293.66, time: 0.2, dur: 0.2 },   // D
                { freq: 329.63, time: 0.4, dur: 0.2 },   // E
                { freq: 293.66, time: 0.6, dur: 0.2 },   // D
                { freq: 329.63, time: 0.8, dur: 0.4 },   // E (ì¡°ê¸ˆ ê¸¸ê²Œ)

                { freq: 349.23, time: 1.4, dur: 0.2 },   // F
                { freq: 329.63, time: 1.6, dur: 0.2 },   // E
                { freq: 349.23, time: 1.8, dur: 0.2 },   // F
                { freq: 329.63, time: 2.0, dur: 0.2 },   // E
                { freq: 349.23, time: 2.2, dur: 0.4 },   // F (ì¡°ê¸ˆ ê¸¸ê²Œ)

                { freq: 392.00, time: 2.8, dur: 0.2 },   // G
                { freq: 349.23, time: 3.0, dur: 0.2 },   // F
                { freq: 329.63, time: 3.2, dur: 0.2 },   // E
                { freq: 293.66, time: 3.4, dur: 0.2 },   // D
                { freq: 261.63, time: 3.6, dur: 0.6 },   // C (ê¸´ì¥ê° ìˆê²Œ ë)

                { freq: 293.66, time: 4.4, dur: 0.2 },   // D
                { freq: 329.63, time: 4.6, dur: 0.2 },   // E
                { freq: 293.66, time: 4.8, dur: 0.2 },   // D
                { freq: 261.63, time: 5.0, dur: 0.6 },   // C (ë°˜ë³µ)
            ],
            promotion: [
                // ìŠ¹ì§„ íŒ¬íŒŒë ˆ - ë°ê³  ì¶•í•˜í•˜ëŠ” ëŠë‚Œ
                { freq: 523.25, time: 0.0, dur: 0.2 },   // C
                { freq: 659.25, time: 0.2, dur: 0.2 },   // E
                { freq: 783.99, time: 0.4, dur: 0.2 },   // G
                { freq: 1046.50, time: 0.6, dur: 0.4 },  // C (ë†’ì€ ì˜¥íƒ€ë¸Œ)

                { freq: 783.99, time: 1.2, dur: 0.2 },   // G
                { freq: 1046.50, time: 1.4, dur: 0.6 },  // C (ë†’ì€ ì˜¥íƒ€ë¸Œ, ê¸¸ê²Œ)

                { freq: 1174.66, time: 2.2, dur: 0.2 },  // D (ë†’ì€ ì˜¥íƒ€ë¸Œ)
                { freq: 1046.50, time: 2.4, dur: 0.2 },  // C
                { freq: 1174.66, time: 2.6, dur: 0.2 },  // D
                { freq: 1318.51, time: 2.8, dur: 0.8 },  // E (ë†’ì€ ì˜¥íƒ€ë¸Œ, ë§¤ìš° ê¸¸ê²Œ)

                { freq: 1046.50, time: 3.8, dur: 0.4 },  // C
                { freq: 783.99, time: 4.2, dur: 0.4 },   // G
                { freq: 523.25, time: 4.6, dur: 0.8 },   // C (ì›ë˜ ì˜¥íƒ€ë¸Œë¡œ)
            ]
        };

        function playBackgroundMusic(type = 'normal') {
            if (!audioContext) return;

            const now = audioContext.currentTime;
            const melody = musicMelodies[type] || musicMelodies.normal;

            melody.forEach(note => {
                playNote(note.freq, now + note.time, note.dur);
            });
        }

        function getMusicType() {
            // ê²Œì„ ìƒíƒœì— ë”°ë¼ ì ì ˆí•œ ìŒì•… íƒ€ì… ê²°ì •
            if (gameState.health <= 30 && gameState.health > 0) {
                return 'crisis';
            }
            return 'normal';
        }

        function startMusicLoop() {
            if (musicLoopInterval) return; // ì´ë¯¸ ì‹¤í–‰ ì¤‘ì´ë©´ ë¬´ì‹œ

            const loopMusic = () => {
                const musicType = getMusicType();

                // ìŒì•… íƒ€ì…ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œë§Œ ë¡œê·¸ (ë””ë²„ê¹…ìš©)
                if (musicType !== currentMusicType) {
                    currentMusicType = musicType;
                }

                playBackgroundMusic(musicType);
            };

            // ì¦‰ì‹œ ì¬ìƒ
            loopMusic();

            // ì£¼ê¸°ì ìœ¼ë¡œ ì¬ìƒ (ìŒì•… íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥¸ ì£¼ê¸°)
            musicLoopInterval = setInterval(() => {
                loopMusic();
            }, 7500); // 7.5ì´ˆë§ˆë‹¤ ë°˜ë³µ
        }

        function playPromotionFanfare() {
            // ìŠ¹ì§„ íŒ¬íŒŒë ˆëŠ” ì¼íšŒì„± ì¬ìƒ
            if (!audioContext) return;

            // ê¸°ì¡´ ë£¨í”„ ì •ì§€
            stopMusicLoop();

            // íŒ¬íŒŒë ˆ ì¬ìƒ
            playBackgroundMusic('promotion');

            // íŒ¬íŒŒë ˆê°€ ëë‚œ í›„ (5ì´ˆ í›„) ì¼ë°˜ ìŒì•… ë£¨í”„ ì¬ì‹œì‘
            setTimeout(() => {
                currentMusicType = 'normal'; // ë¦¬ì…‹
                startMusicLoop();
            }, 5500);
        }

        function stopMusicLoop() {
            if (musicLoopInterval) {
                clearInterval(musicLoopInterval);
                musicLoopInterval = null;
            }
        }

        function toggleMusic() {
            initAudio();
            const btn = document.getElementById('musicToggle');
            if (btn.textContent.includes('ON')) {
                btn.textContent = 'ğŸ”‡ ìŒì•… OFF';
                musicPlaying = false;
            } else {
                btn.textContent = 'ğŸ”Š ìŒì•… ON';
                playBackgroundMusic();
            }
        }

        function playSound(type) {
            if (!audioContext) return;
            const now = audioContext.currentTime;
            if (type === 'select') playNote(880, now, 0.1);
            else if (type === 'success') {
                playNote(523.25, now, 0.1);
                playNote(659.25, now + 0.1, 0.1);
                playNote(783.99, now + 0.2, 0.2);
            }
            else if (type === 'fail') {
                playNote(440, now, 0.1);
                playNote(392, now + 0.1, 0.1);
                playNote(349.23, now + 0.2, 0.3);
            }
        }

        // ê²Œì„ ìƒíƒœ
        const gameState = {
            rank: -1,
            work: 50,
            network: 50,
            health: 50,
            hbmLevel: 0,
            marketCap: 300,
            currentEventIndex: 0,
            eventsCompletedInRank: 0
        };

        const ranks = ['ë©´ì ‘', 'ì‚¬ì›', 'ëŒ€ë¦¬', 'ê³¼ì¥', 'ì°¨ì¥', 'ë¶€ì¥', 'ì„ì›'];
        const hbmStages = ['ì¤€ë¹„ ì¤‘', 'HBM2 ê°œë°œ', 'HBM3 ê°œë°œ', 'HBM3E ê°œë°œ', 'HBM4 ì™„ì„±!'];

        // ìºë¦­í„° ì •ì˜
        const characters = {
            interviewer: { name: 'ì„ì› ë©´ì ‘ê´€', class: 'char-interviewer' },
            player: { name: 'ë‚˜', class: 'char-player' },
            kim: { name: 'ê¹€ëŒ€ë¦¬', class: 'char-kim' },
            boss: { name: 'íŒ€ì¥ë‹˜', class: 'char-boss' },
            seoyeon: { name: 'ì„œì—°', class: 'char-seoyeon' },
            rival: { name: 'í•˜ì´ë‹‰ìŠ¤ ì¹œêµ¬', class: 'char-rival' },
            executive: { name: 'CEO', class: 'char-executive' }
        };

        // ì´ë²¤íŠ¸ ë°ì´í„° (ìºë¦­í„° ëŒ€í™” í¬í•¨)
        const events = {
            '-1': [ // ë©´ì ‘
                {
                    character: 'interviewer',
                    dialogue: "ìš°ë¦¬ íšŒì‚¬ HBM ì‚¬ì—…ë¶€ê°€ ì‘ë…„ì— ì—”ë¹„ë””ì•„ ë‚©í’ˆì—ì„œ íƒˆë½í–ˆìŠµë‹ˆë‹¤. SKí•˜ì´ë‹‰ìŠ¤ì— ë°€ë¦° ê±°ì£ . ì´ëŸ° ìƒí™©ì—ì„œë„ ìš°ë¦¬ íšŒì‚¬ì— ì§€ì›í•œ ì´ìœ ê°€ ë­¡ë‹ˆê¹Œ?",
                    choices: [
                        {
                            text: "ì‹¤íŒ¨ë¥¼ ê²½í—˜í•œ ì¡°ì§ì´ì•¼ë§ë¡œ ì§„ì§œ ì„±ì¥ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ì‚¼ì„±ì˜ ì—­ì „ ë“œë¼ë§ˆì— ë™ì°¸í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ +20, ì²´ë ¥ -5",
                            result: { work: 15, network: 20, health: -5 }
                        },
                        {
                            text: "ì‚¼ì„±ì˜ ê¸°ìˆ ë ¥ê³¼ ìë³¸ë ¥ì€ ì—¬ì „íˆ ì—…ê³„ ìµœê³ ì…ë‹ˆë‹¤. ì´ë²ˆ ì‹¤íŒ¨ëŠ” ì¼ì‹œì ì´ë©°, ê³§ ë§ŒíšŒí•  ê²ƒì…ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +10, ì²´ë ¥ 0",
                            result: { work: 20, network: 10, health: 0 }
                        },
                        {
                            text: "ì‚¬ì‹¤ SKí•˜ì´ë‹‰ìŠ¤ë„ ì§€ì›í–ˆëŠ”ë°... ì•„ë‹ˆ, ì‚¼ì„±ì´ ìµœìš°ì„  ì§€ë§ì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ -20, ì¸ë§¥ -30, ì²´ë ¥ -10",
                            result: { work: -20, network: -30, health: -10 }
                        }
                    ]
                }
            ],
            0: [ // ì‚¬ì›
                {
                    character: 'kim',
                    dialogue: "ì‘ë…„ì— HBM3 ì—”ë¹„ë””ì•„ ë‚©í’ˆ íƒˆë½í•˜ê³  íŒ€ ë¶„ìœ„ê¸°ê°€ ìµœì•…ì´ì•¼. ìš°ë¦¬ íŒ€ì€ ì¼ì´ ì—„ì²­ ë§ì•„. ê°ì˜¤í•´.",
                    choices: [
                        {
                            text: "ì—´ì‹¬íˆ ë°°ìš°ê² ìŠµë‹ˆë‹¤! ë¬´ì—‡ë¶€í„° ì‹œì‘í•˜ë©´ ë ê¹Œìš”? í˜ë“  ë¶€ì„œë¼ë„ ì„±ì¥ì˜ ê¸°íšŒì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ +10, ì²´ë ¥ -10",
                            result: { work: 15, network: 10, health: -10 }
                        },
                        {
                            text: "ì œê°€ í•  ìˆ˜ ìˆëŠ” ì¼ì´ ìˆë‹¤ë©´ ë°”ë¡œ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤. ì¼ë‹¨ í•´ë³´ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +10, ì¸ë§¥ +5, ì²´ë ¥ -5",
                            result: { work: 10, network: 5, health: -5 }
                        },
                        {
                            text: "...ì´ëŸ° ì–˜ê¸°ë¥¼ ì‹ ì…í•œí…Œ í•˜ì‹œë©´ ì–´ë–¡í•©ë‹ˆê¹Œ? ì¢€ ë¶€ë‹´ìŠ¤ëŸ¬ìš´ë°ìš”.",
                            effect: "ì—…ë¬´ -5, ì¸ë§¥ -20, ì²´ë ¥ +5",
                            result: { work: -5, network: -20, health: 5 }
                        }
                    ]
                },
                {
                    character: 'boss',
                    dialogue: "ë¯¸êµ­ ë³¸ì‚¬ì—ì„œ ì›”ìš”ì¼ ì˜¤ì „ê¹Œì§€ HBM3E ê¸°ìˆ  ê²€í†  ë³´ê³ ì„œë¥¼ ìš”ì²­í–ˆì–´. ì£¼ë§ ë°˜ë‚©ì´ì•¼.",
                    choices: [
                        {
                            text: "ê°™ì´ ë‚¨ì•„ì„œ ë•ê² ìŠµë‹ˆë‹¤. ì£¼ë§ì— ë°°ìš¸ ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°íšŒì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ +20, ì²´ë ¥ -25",
                            result: { work: 15, network: 20, health: -25 }
                        },
                        {
                            text: "ì œê°€ í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë§Œ ì²˜ë¦¬í•˜ê³  í† ìš”ì¼ ì˜¤ì „ì—ëŠ” ë‚˜ê°€ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +5, ì¸ë§¥ -10, ì²´ë ¥ -10",
                            result: { work: 5, network: -10, health: -10 }
                        },
                        {
                            text: "ì£„ì†¡í•˜ì§€ë§Œ ì´ë²ˆ ì£¼ë§ì—ëŠ” ì•½ì†ì´ ìˆìŠµë‹ˆë‹¤...",
                            effect: "ì—…ë¬´ -10, ì¸ë§¥ -25, ì²´ë ¥ +10",
                            result: { work: -10, network: -25, health: 10 }
                        }
                    ]
                },
                {
                    character: 'boss',
                    dialogue: "ì´ê±° ì„ì› ë³´ê³ ê¹Œì§€ ì˜¬ë¼ê°”ì–´! ì‹ ì…ì´ë¼ê³  ë¬´ì¡°ê±´ ë´ì£¼ëŠ” ê²Œ ì•„ë‹ˆì•¼! 95%ë¥¼ 59%ë¡œ ì˜ëª» ì“´ ìˆ˜ìœ¨ ë³´ê³ ì„œ... ì–´ë–»ê²Œ í•  ê±°ì•¼?",
                    choices: [
                        {
                            text: "ì£„ì†¡í•©ë‹ˆë‹¤. ì§€ê¸ˆ ì¦‰ì‹œ ìˆ˜ì •ë³¸ ì‘ì„±í•˜ê³  ì¬ë°œë°©ì§€ ëŒ€ì±…ì„ ì„¸ìš°ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ -5, ì²´ë ¥ -15",
                            result: { work: 20, network: -5, health: -15 }
                        },
                        {
                            text: "ì œ ì˜ëª»ì…ë‹ˆë‹¤. ê¹€ëŒ€ë¦¬ë‹˜ê»˜ ê²€ìˆ˜ë¥¼ ë¶€íƒë“œë ¸ì–´ì•¼ í–ˆëŠ”ë°... ë„ì›€ì„ êµ¬í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +10, ì¸ë§¥ +10, ì²´ë ¥ -10",
                            result: { work: 10, network: 10, health: -10 }
                        },
                        {
                            text: "í•˜ì§€ë§Œ ì´ëŸ° ì¤‘ìš”í•œ ë³´ê³ ì„œë¥¼ ì‹ ì…ì—ê²Œ ë§¡ê¸°ì‹  ê²ƒë„...",
                            effect: "ì—…ë¬´ -25, ì¸ë§¥ -40, ì²´ë ¥ -15",
                            result: { work: -25, network: -40, health: -15 }
                        }
                    ]
                },
                {
                    character: 'boss',
                    dialogue: "ìš”ì¦˜ ì Šì€ ì• ë“¤ì€ íšŒì‹ ë¬¸í™” ì´í•´ë¥¼ ëª» í•´. ì‹ ì… ë•ŒëŠ” ì´ëŸ° ìë¦¬ê°€ ì¸ë§¥ ìŒ“ëŠ” ê¸°íšŒë¼ê³ ! 3ì°¨ê¹Œì§€ ê°€ì!",
                    choices: [
                        {
                            text: "ë‚´ì¼ êµìœ¡ ë•Œë¬¸ì— ë¨¼ì € ë‚˜ê°€ê² ìŠµë‹ˆë‹¤. ì£„ì†¡í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +10, ì¸ë§¥ -15, ì²´ë ¥ +15",
                            result: { work: 10, network: -15, health: 15 }
                        },
                        {
                            text: "ëê¹Œì§€ ìë¦¬ë¥¼ ì§€í‚µë‹ˆë‹¤. ë‹¤ìŒë‚  êµìœ¡ì€... ì–´ë–»ê²Œë“  ë²„í…¨ì•¼ì£ .",
                            effect: "ì—…ë¬´ -10, ì¸ë§¥ +25, ì²´ë ¥ -30",
                            result: { work: -10, network: 25, health: -30 }
                        }
                    ]
                },
                {
                    character: 'boss',
                    dialogue: "ê³ ìƒí–ˆì–´. ì´ì œ ì§„ì§œ ì¼ì„ ì‹œì‘í•´ë³¼ê¹Œ? ë‹¤ìŒ ë‹¬ì— ëŒ€ë¦¬ ìŠ¹ì§„ ì‹¬ì‚¬ê°€ ìˆì–´. ë„¤ê°€ í›„ë³´ì•¼.",
                    choices: [
                        {
                            text: "ë” í° ì±…ì„ì„ ë§¡ì„ ì¤€ë¹„ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤! ìŠ¹ì§„ì— í•„ìš”í•œ ê²ƒì´ë¼ë©´ ë­ë“  í•˜ê² ìŠµë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +15, ì²´ë ¥ -10",
                            result: { work: 25, network: 15, health: -10 }
                        },
                        {
                            text: "ì°¨ê·¼ì°¨ê·¼ ë°°ìš°ë©° ì„±ì¥í•˜ê² ìŠµë‹ˆë‹¤. ì‹¤ë ¥ìœ¼ë¡œ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +5, ì²´ë ¥ +5",
                            result: { work: 20, network: 5, health: 5 }
                        }
                    ]
                }
            ],
            1: [ // ëŒ€ë¦¬
                {
                    character: 'player',
                    dialogue: "ë“œë””ì–´ ëŒ€ë¦¬ë¡œ ìŠ¹ì§„í–ˆë‹¤! ì´ì œ HBM ìˆ˜ìœ¨ ê°œì„  í”„ë¡œì íŠ¸ë¥¼ ë§¡ê²Œ ë˜ì—ˆë‹¤. ì‹ ì… ì‚¬ì› 2ëª…ì´ ë‚˜ë¥¼ ì˜¬ë ¤ë‹¤ë³´ê³  ìˆë‹¤. 1ë…„ ì „ì˜ ë‚´ ëª¨ìŠµì´ ë– ì˜¤ë¥¸ë‹¤.",
                    choices: [
                        {
                            text: "í›„ë°°ë“¤ê³¼ ì ê·¹ì ìœ¼ë¡œ ì†Œí†µí•˜ë©° í•¨ê»˜ ì„±ì¥í•˜ê² ìŠµë‹ˆë‹¤. ìš°ë¦¬ íŒ€ì›Œí¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ +20, ì²´ë ¥ -10",
                            result: { work: 15, network: 20, health: -10 }
                        },
                        {
                            text: "ì™„ë²½í•œ ì—…ë¬´ ì„±ê³¼ì— ì§‘ì¤‘í•˜ê² ìŠµë‹ˆë‹¤. ê²°ê³¼ë¡œ í›„ë°°ë“¤ì„ ì´ëŒê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ -5, ì²´ë ¥ -15",
                            result: { work: 25, network: -5, health: -15 }
                        }
                    ]
                },
                {
                    character: 'rival',
                    dialogue: "ì•¼, ë„ˆí¬ íšŒì‚¬ HBM3 ì—”ë¹„ë””ì•„ ë‚©í’ˆ ë˜ íƒˆë½í–ˆëŒ€? ã…‹ã…‹ ì‚¼ì„±ì€ ì´ì œ ëë‚¬ì–´. ìš°ë¦¬ íšŒì‚¬ëŠ” HBM3E ë…ì  ê³µê¸‰ ì¤‘ì¸ë°~ ë„ˆ ê³„ì† ê±°ê¸° ë‹¤ë‹ ê±°ì•¼? ë‚´ê°€ ì¶”ì²œí•´ì¤„ê²Œ, ìš°ë¦¬ ìª½ìœ¼ë¡œ ì™€. ì‚¼ì„±ì— ë¯¸ë ¨ ê°–ì§€ ë§ˆ.",
                    choices: [
                        {
                            text: "ë„¤ê°€ ì•Œì§€ë„ ëª»í•˜ë©´ì„œ. ì‚¼ì„±ì€ ê³§ ì—­ì „í•  ê±°ì•¼. ë‘ê³  ë´.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ -10, ì²´ë ¥ -15",
                            result: { work: 20, network: -10, health: -15 }
                        },
                        {
                            text: "...ì‚¬ì‹¤ ê³ ë¯¼ ì¤‘ì´ì•¼. ì •ë³´ ì¢€ ì•Œë ¤ì¤˜.",
                            effect: "ì—…ë¬´ -15, ì¸ë§¥ +15, ì²´ë ¥ +10",
                            result: { work: -15, network: 15, health: 10 }
                        },
                        {
                            text: "ì‹¤íŒ¨í•œ ì¡°ì§ì—ì„œ ë°°ìš°ëŠ” ê²Œ ë” ë§ì•„. ë‚˜ëŠ” ì‚¼ì„±ì˜ ì—­ì „ ìŠ¤í† ë¦¬ë¥¼ ì§ì ‘ ë§Œë“¤ ê±°ì•¼.",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +5, ì²´ë ¥ -20",
                            result: { work: 30, network: 5, health: -20 }
                        }
                    ]
                },
                {
                    character: 'boss',
                    dialogue: "ìš°ë¦¬ íŒ€ì€ ë°”ë¹ . ë„ˆí¬ ê°œë°œíŒ€ ìš”ì²­ì‚¬í•­ ë“¤ì–´ì£¼ë‹¤ê°„ ìƒì‚° ì¼ì • ë‹¤ í‹€ì–´ì ¸. í˜„ì¥ì„ ë­˜ ì•Œì•„? HBM ìˆ˜ìœ¨ ê°œì„ ? ê·¸ê±´ ë„ˆí¬ ë¬¸ì œì•¼.",
                    choices: [
                        {
                            text: "ë°ì´í„°ë¡œ ì„¤ë“í•©ë‹ˆë‹¤. ìš°ë¦¬ ë°©ì‹ì´ ì¥ê¸°ì ìœ¼ë¡œ ìƒì‚°ì„±ì„ ë†’ì¸ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +15, ì²´ë ¥ -15",
                            result: { work: 20, network: 15, health: -15 }
                        },
                        {
                            text: "íƒ€í˜‘ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤. ìƒì‚° ì¼ì •ì— ì˜í–¥ ì—†ëŠ” ë²”ìœ„ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì¶•ì†Œí•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +10, ì¸ë§¥ +20, ì²´ë ¥ -10",
                            result: { work: 10, network: 20, health: -10 }
                        },
                        {
                            text: "ì„ì›ì—ê²Œ ì—ìŠ¤ì»¬ë ˆì´ì…˜í•©ë‹ˆë‹¤. ì´ê±´ íšŒì‚¬ ì°¨ì›ì˜ ë¬¸ì œì…ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ -15, ì²´ë ¥ -5",
                            result: { work: 15, network: -15, health: -5 }
                        }
                    ]
                },
                {
                    character: 'boss',
                    dialogue: "í¥ë¯¸ë¡­ê¸´ í•œë°... ê²€ì¦ë˜ì§€ ì•Šì€ ë°©ì‹ì´ë¼ ë¦¬ìŠ¤í¬ê°€ í¬ë„¤. ë„¤ê°€ ì±…ì„ì§ˆ ìˆ˜ ìˆì–´? ì´ HBM ì ì¸µ ê³µì •ì˜ í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ ë§ì´ì•¼.",
                    choices: [
                        {
                            text: "ì˜ˆ, ì±…ì„ì§€ê² ìŠµë‹ˆë‹¤. ì´ê²Œ ì‚¼ì„±ì´ ë‹¤ì‹œ ì¼ì–´ì„¤ ê¸°íšŒì…ë‹ˆë‹¤. ì œ ì»¤ë¦¬ì–´ë¥¼ ê±¸ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +35, ì¸ë§¥ +10, ì²´ë ¥ -25",
                            result: { work: 35, network: 10, health: -25 }
                        },
                        {
                            text: "ì†Œê·œëª¨ íŒŒì¼ëŸ¿ í…ŒìŠ¤íŠ¸ë¶€í„° ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤. ë‹¨ê³„ì ìœ¼ë¡œ ê²€ì¦í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +15, ì²´ë ¥ -10",
                            result: { work: 20, network: 15, health: -10 }
                        },
                        {
                            text: "...ìƒê°í•´ë³´ë‹ˆ ë„ˆë¬´ ìœ„í—˜í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë³´ìˆ˜ì ìœ¼ë¡œ ê°€ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ -10, ì¸ë§¥ -5, ì²´ë ¥ +10",
                            result: { work: -10, network: -5, health: 10 }
                        }
                    ]
                }
            ],
            2: [ // ê³¼ì¥
                {
                    character: 'executive',
                    dialogue: "ìë„¤ì˜ í˜ì‹  ì•„ì´ë””ì–´ê°€ ì„ì›ì§„ì„ ì„¤ë“ì‹œì¼°ì–´. ì°¨ì„¸ëŒ€ ì „ëµ í”„ë¡œì íŠ¸ 'HBM ì¬ë„ì•½ í”„ë¡œì íŠ¸'ì˜ í•µì‹¬ ë©¤ë²„ë¡œ ë°œíƒë˜ì—ˆë„¤. ì´ë²ˆì´ ì‚¼ì„±ì˜ ë§ˆì§€ë§‰ ê¸°íšŒì•¼.",
                    choices: [
                        {
                            text: "HBM4 ê¸°ìˆ  ìŠ¤í„°ë””ì— ì˜¬ì¸í•©ë‹ˆë‹¤. ì„¸ê³„ ìµœì´ˆê°€ ëª©í‘œì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +5, ì²´ë ¥ -20",
                            result: { work: 30, network: 5, health: -20, hbm: 1, marketCap: 30 }
                        },
                        {
                            text: "íŒ€ ë¹Œë”©ê³¼ ê¸°ìˆ  ê°œë°œì„ ê· í˜•ìˆê²Œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +20, ì²´ë ¥ -15",
                            result: { work: 20, network: 20, health: -15, hbm: 1, marketCap: 30 }
                        }
                    ]
                },
                {
                    character: 'player',
                    dialogue: "ê³¼ì¥ë‹˜, TSV ê³µì •ì—ì„œ ê³„ì† ë¶ˆëŸ‰ì´ ë‚˜ì˜µë‹ˆë‹¤. ìˆ˜ìœ¨ì´ 50%ë¥¼ ë„˜ì§€ ëª»í•´ìš”. ì´ë¡ ìƒìœ¼ë¡  ë˜ì–´ì•¼ í•˜ëŠ”ë°... ë§ˆê°ì€ 3ê°œì›” í›„ì…ë‹ˆë‹¤.",
                    choices: [
                        {
                            text: "ë°¤ìƒ˜ ì•¼ê·¼ìœ¼ë¡œ ì§ì ‘ í•´ê²°ì±…ì„ ì°¾ìŠµë‹ˆë‹¤. íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ê³µì •ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ê²€í† í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +10, ì²´ë ¥ -30",
                            result: { work: 25, network: 10, health: -30 }
                        },
                        {
                            text: "ì™¸ë¶€ ì „ë¬¸ê°€ ìë¬¸ì„ ë°›ê³  TSMC í˜‘ë ¥ì„ íƒ€ì§„í•©ë‹ˆë‹¤. ìì¡´ì‹¬ë³´ë‹¤ ì„±ê³µì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +20, ì²´ë ¥ -15",
                            result: { work: 20, network: 20, health: -15 }
                        },
                        {
                            text: "ë§ˆê° ì—°ì¥ì„ ìš”ì²­í•©ë‹ˆë‹¤. í’ˆì§ˆì´ ìš°ì„ ì…ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ -15, ì¸ë§¥ -20, ì²´ë ¥ +10",
                            result: { work: -15, network: -20, health: 10 }
                        }
                    ]
                },
                {
                    character: 'player',
                    dialogue: "íŒ€ì› Aì™€ Bê°€ ì‹¬ê°í•˜ê²Œ ëŒ€ë¦½í•˜ê³  ìˆë‹¤. AëŠ” 'ì œ ë°©ë²•ì´ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤!'ë¼ê³  ì£¼ì¥í•˜ê³ , BëŠ” 'ê²½í—˜ë„ ì—†ëŠ” ê²Œ ì„¤ì¹˜ê¸´'ì´ë¼ë©° í™”ë¥¼ ë‚¸ë‹¤. íŒ€ ë¶„ìœ„ê¸°ê°€ ìµœì•…ì´ë‹¤.",
                    choices: [
                        {
                            text: "ì–‘ì¸¡ ì˜ê²¬ì„ ë“£ê³  ê°ê´€ì  ë°ì´í„°ë¡œ íŒë‹¨í•©ë‹ˆë‹¤. ê°ì •ì´ ì•„ë‹Œ íŒ©íŠ¸ë¡œ ì¤‘ì¬í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ +25, ì²´ë ¥ -20",
                            result: { work: 15, network: 25, health: -20 }
                        },
                        {
                            text: "ëª…í™•í•œ ê·œì¹™ì„ ì •í•©ë‹ˆë‹¤. ì´ê²¬ì´ ìˆìœ¼ë©´ ìµœì¢… ê²°ì •ì€ ì œê°€ í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +10, ì²´ë ¥ -15",
                            result: { work: 20, network: 10, health: -15 }
                        },
                        {
                            text: "ë¶€ì¥ë‹˜ê»˜ ë³´ê³ í•˜ê³  ì¡°ì§ì  í•´ê²°ì„ ìš”ì²­í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ -5, ì¸ë§¥ -15, ì²´ë ¥ 0",
                            result: { work: -5, network: -15, health: 0 }
                        }
                    ]
                },
                {
                    character: 'player',
                    dialogue: "ë“œë””ì–´ HBM3E ì–‘ì‚°ì— ì„±ê³µí–ˆë‹¤! ìˆ˜ìœ¨ 85% ë‹¬ì„±! ë‰´ìŠ¤ì—ì„œ 'ì‚¼ì„±ì „ì, HBM3E ì–‘ì‚° ì„±ê³µ... ì—”ë¹„ë””ì•„ ì¬ê³µê¸‰ ê°€ëŠ¥ì„±'ì´ë¼ê³  ë³´ë„í•˜ê³  ìˆë‹¤. í•˜ì´ë‹‰ìŠ¤ ì¹œêµ¬ì—ê²Œì„œ 'ì•¼... ì¶•í•˜í•œë‹¤. ë‚´ê°€ ì˜ëª» ë´¤ë‚˜ë´'ë¼ëŠ” ë¬¸ìê°€ ì™”ë‹¤.",
                    choices: [
                        {
                            text: "ë°”ë¡œ HBM4 ê°œë°œ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤. ì´ì œ ì‹œì‘ì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +15, ì²´ë ¥ -20",
                            result: { work: 30, network: 15, health: -20, hbm: 2, marketCap: 70 }
                        },
                        {
                            text: "íŒ€ì›ë“¤ê³¼ ì„±ê³¼ë¥¼ ì¶•í•˜í•˜ê³  ì¬ì¶©ì „ì˜ ì‹œê°„ì„ ê°€ì§‘ë‹ˆë‹¤. ì§€ì†ê°€ëŠ¥í•œ ì„±ì¥ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +25, ì²´ë ¥ +10",
                            result: { work: 20, network: 25, health: 10, hbm: 2, marketCap: 70 }
                        }
                    ]
                }
            ],
            3: [ // ì°¨ì¥
                {
                    character: 'executive',
                    dialogue: "ì°¨ì¥ ìŠ¹ì§„ì„ ì¶•í•˜í•˜ë„¤! ìë„¤ê°€ HBM ì‚¬ì—…ì˜ ë¯¸ë˜ì•¼. ì´ë²ˆì—” í•˜ì´ë‹‰ìŠ¤ë¥¼ ë”°ë¼ê°€ëŠ” ê²Œ ì•„ë‹ˆë¼ ìš°ë¦¬ê°€ ì‹œì¥ì„ ë¦¬ë“œí•´ì•¼ í•´. HBM4 í”„ë¡œì íŠ¸ì˜ ì „ì²´ ë¡œë“œë§µì„ ì±…ì„ì§€ê²Œ.",
                    choices: [
                        {
                            text: "ê³µê²©ì ì¸ ì¼ì •ìœ¼ë¡œ 2028ë…„ ìƒë°˜ê¸° ì–‘ì‚°ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ì†ë„ê°€ ìƒëª…ì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +35, ì¸ë§¥ +10, ì²´ë ¥ -30",
                            result: { work: 35, network: 10, health: -30, hbm: 3, marketCap: 60 }
                        },
                        {
                            text: "ì•ˆì •ì ì¸ 2028ë…„ í•˜ë°˜ê¸° ì–‘ì‚°ì„ ëª©í‘œë¡œ í’ˆì§ˆì— ì§‘ì¤‘í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +20, ì²´ë ¥ -15",
                            result: { work: 25, network: 20, health: -15, hbm: 3, marketCap: 60 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "SKí•˜ì´ë‹‰ìŠ¤ê°€ 'HBM4 Early Access' í”„ë¡œê·¸ë¨ì„ ë°œí‘œí–ˆìŠµë‹ˆë‹¤! íˆ¬ìë¥¼ ë” ëŠ˜ë ¤ì•¼ í•˜ëŠ” ê±° ì•„ë‹™ë‹ˆê¹Œ? ë˜ ëŠ¦ìœ¼ë©´ ëì…ë‹ˆë‹¤! ì°¨ì¥ë‹˜ ìƒê°ì€ ì–´ë–»ìŠµë‹ˆê¹Œ?",
                    choices: [
                        {
                            text: "ì¼ì •ì„ 6ê°œì›” ì•ë‹¹ê¸°ê² ìŠµë‹ˆë‹¤. ê°œë°œì¸ë ¥ê³¼ ì˜ˆì‚°ì„ ë‘ ë°°ë¡œ ìš”ì²­í•©ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +25, ì²´ë ¥ -35",
                            result: { work: 30, network: 25, health: -35, marketCap: 50 }
                        },
                        {
                            text: "ì†ë„ë³´ë‹¤ í’ˆì§ˆë¡œ ì°¨ë³„í™”í•˜ê² ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë” ì•ˆì •ì ì¸ HBM4ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +15, ì²´ë ¥ -20",
                            result: { work: 25, network: 15, health: -20, marketCap: 40 }
                        },
                        {
                            text: "í˜„ì¬ ê³„íšì„ ìœ ì§€í•˜ê² ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ìš°ë¦¬ ë¡œë“œë§µì„ ë¯¿ì–´ì•¼ í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +10, ì¸ë§¥ -15, ì²´ë ¥ -10",
                            result: { work: 10, network: -15, health: -10, marketCap: 20 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "HBM4 ì–‘ì‚°ì„ ìœ„í•´ í‰íƒ ë¼ì¸ì— 20ì¡°ì› íˆ¬ìê°€ í•„ìš”í•©ë‹ˆë‹¤. 20ì¡°ëŠ” ë„ˆë¬´ í½ë‹ˆë‹¤. ë§Œì•½ ì‹¤íŒ¨í•˜ë©´ íšŒì‚¬ê°€ í”ë“¤ë¦½ë‹ˆë‹¤. í•˜ì§€ë§Œ íˆ¬ìí•˜ì§€ ì•Šìœ¼ë©´ ê²½ìŸì—ì„œ ë’¤ì²˜ì§‘ë‹ˆë‹¤. ì°¨ì¥ë‹˜, ë‹¹ì‹ ì˜ ì˜ê²¬ì„ ë“£ê³  ì‹¶ìŠµë‹ˆë‹¤.",
                    choices: [
                        {
                            text: "20ì¡° ì „ì•¡ íˆ¬ìê°€ í•„ìš”í•©ë‹ˆë‹¤. ì§€ê¸ˆì´ ê¸°íšŒì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +30, ì²´ë ¥ -20",
                            result: { work: 25, network: 30, health: -20, marketCap: 100 }
                        },
                        {
                            text: "ë‹¨ê³„ì  íˆ¬ìë¥¼ ì œì•ˆí•©ë‹ˆë‹¤. 1ë‹¨ê³„ 10ì¡°ë¡œ ì‹œì‘í•´ ì„±ê³¼ë¥¼ ë³´ê³  ì¶”ê°€ íˆ¬ìí•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +15, ì²´ë ¥ -10",
                            result: { work: 20, network: 15, health: -10, marketCap: 60 }
                        }
                    ]
                },
                {
                    character: 'seoyeon',
                    dialogue: "ë‹¹ì‹ ... ë§ì´ ì§€ì³ ë³´ì—¬ìš”. ë§¤ì¼ ë°¤ 11ì‹œê¹Œì§€ ì¼í•˜ê³ , ì£¼ë§ë„ ì—†ì´... ì´ê²Œ ë‹¹ì‹ ì´ ì›í•˜ë˜ ì‚¶ì´ì—ìš”? ë‚˜ëŠ”... ì—¬ì „íˆ ë‹¹ì‹ ì„ ì¢‹ì•„í•´ìš”. ì´ì œ ì´ëŸ° ì–´ë ¤ìš´ ê±° ê·¸ë§Œí•˜ê³  ë‚˜ë‘ í–‰ë³µí•˜ê²Œ ì‚´ì§€ ì•Šì„ë˜ìš”?",
                    choices: [
                        {
                            text: "...ë¯¸ì•ˆí•´ìš”. ë‚œ ì´ ì¼ì„ ëê¹Œì§€ í•´ì•¼ í•´ìš”. HBM4ë¥¼ ì™„ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¹ì‹ ì„ ë§Œë‚  ìê²©ì´ ì—†ì–´ìš”.",
                            effect: "ì—…ë¬´ +40, ì¸ë§¥ -10, ì²´ë ¥ -30",
                            result: { work: 40, network: -10, health: -30, marketCap: 0 }
                        },
                        {
                            text: "ë‹¹ì‹  ë§ì´ ë§ì•„ìš”... ë‚˜ë„ ì§€ì³¤ì–´ìš”. í•¨ê»˜ ìƒˆë¡œìš´ ì‹œì‘ì„ í•´ë³¼ê¹Œìš”?",
                            effect: "ì—…ë¬´ -30, ì¸ë§¥ +20, ì²´ë ¥ +40",
                            result: { work: -30, network: 20, health: 40, marketCap: 0 }
                        },
                        {
                            text: "ì¡°ê¸ˆë§Œ... ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì¤˜ìš”. HBM4ë§Œ ì™„ì„±í•˜ë©´, ê·¸ë•Œ ë‹¤ì‹œ ë§Œë‚˜ìš”. ì•½ì†í• ê²Œìš”.",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +10, ì²´ë ¥ -25",
                            result: { work: 30, network: 10, health: -25, marketCap: 0 }
                        }
                    ]
                },
                {
                    character: 'player',
                    dialogue: "HBM4 ì—”ì§€ë‹ˆì–´ë§ ìƒ˜í”Œì´ ì—”ë¹„ë””ì•„ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆë‹¤! ì—”ë¹„ë””ì•„ ì—”ì§€ë‹ˆì–´: 'Impressive. í•˜ì´ë‹‰ìŠ¤ë³´ë‹¤ ì „ë ¥ íš¨ìœ¨ì´ 12% ì¢‹ë„¤ìš”.' íšŒì‚¬ ì£¼ê°€ê°€ ê¸‰ë“±í•œë‹¤. ë¶€ì¥ ìŠ¹ì§„ì´ í™•ì •ë˜ì—ˆë‹¤!",
                    choices: [
                        {
                            text: "ë°”ë¡œ ì–‘ì‚° ì¤€ë¹„ TFë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. 2028ë…„ ë§ ì–‘ì‚°ì´ ëª©í‘œì…ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +35, ì¸ë§¥ +25, ì²´ë ¥ -25",
                            result: { work: 35, network: 25, health: -25, marketCap: 120 }
                        },
                        {
                            text: "íŒ€ ì¬ì •ë¹„ì™€ í•¨ê»˜ ì•ˆì •ì ì¸ ì–‘ì‚° ê³„íšì„ ì„¸ì›ë‹ˆë‹¤. 2029ë…„ ìƒë°˜ê¸°ê°€ í˜„ì‹¤ì ì…ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +30, ì²´ë ¥ -10",
                            result: { work: 25, network: 30, health: -10, marketCap: 120 }
                        }
                    ]
                }
            ],
            4: [ // ë¶€ì¥
                {
                    character: 'executive',
                    dialogue: "ë¶€ì¥ë‹˜, ì‚¼ì„±ì˜ ë°˜ë„ì²´ ë¯¸ë˜ê°€ HBMì— ë‹¬ë ¸ìŠµë‹ˆë‹¤. ì´ì œ HBMì‚¬ì—…ë¶€ ì „ì²´ë¥¼ ì±…ì„ì§‘ë‹ˆë‹¤. íŒ€ì›ë§Œ 200ëª…ì´ ë„˜ìŠµë‹ˆë‹¤. ë¶€íƒí•©ë‹ˆë‹¤.",
                    choices: [
                        {
                            text: "HBM4 ì–‘ì‚°ê³¼ HBM5 ì—°êµ¬ë¥¼ ë™ì‹œì— ì¶”ì§„í•©ë‹ˆë‹¤. ê³„ì† ì•ì„œê°€ì•¼ í•©ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +40, ì¸ë§¥ +15, ì²´ë ¥ -35",
                            result: { work: 40, network: 15, health: -35, marketCap: 80 }
                        },
                        {
                            text: "HBM4 ì•ˆì •í™”ì— ì§‘ì¤‘í•˜ê³  HBM5ëŠ” 2ë…„ í›„ ì‹œì‘í•©ë‹ˆë‹¤. ë‹¨ê³„ì ìœ¼ë¡œ ê°€ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +25, ì²´ë ¥ -20",
                            result: { work: 30, network: 25, health: -20, marketCap: 80 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "ê¸€ë¡œë²Œ ê²½ê¸° ì¹¨ì²´ë¡œ íšŒì‚¬ ì‚¬ì •ì´ ì–´ë ¤ì›Œì¡ŒìŠµë‹ˆë‹¤. ë¶€ì¥ë‹˜ ë¶€ì„œì—ì„œ 30% ì¸ë ¥ ê°ì¶•ì´ í•„ìš”í•©ë‹ˆë‹¤. ëª…ë‹¨ì„ ì˜¬ë ¤ì£¼ì„¸ìš”. ê³ ë“±í•™êµ ì‹œì ˆ ì¹œêµ¬ ì•„ë²„ì§€ê°€ IMF ë•Œ ì‚¼ì„±ì „ìì—ì„œ ì •ë¦¬í•´ê³  ë‹¹í•˜ì…¨ë˜ ì¼ì´ ë– ì˜¤ë¦…ë‹ˆë‹¤...",
                    choices: [
                        {
                            text: "ì„ì›ì§„ì—ê²Œ ê°•ë ¥íˆ í•­ì˜í•©ë‹ˆë‹¤. HBMì´ íšŒì‚¬ ë¯¸ë˜ì¸ë° ì¸ë ¥ ê°ì¶•ì€ ë§ì´ ì•ˆ ë©ë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +30, ì²´ë ¥ -30",
                            result: { work: 20, network: 30, health: -30, marketCap: 0 }
                        },
                        {
                            text: "ìµœì†Œí•œì˜ ì¸ì›ë§Œ ì¡°ì •í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ì œ ì—°ë´‰ ì‚­ê°ìœ¼ë¡œ ì¶©ë‹¹í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +25, ì¸ë§¥ +35, ì²´ë ¥ -25",
                            result: { work: 25, network: 35, health: -25, marketCap: 0 }
                        },
                        {
                            text: "íšŒì‚¬ ë°©ì¹¨ì„ ë”°ë¥´ë˜, ì¬ì·¨ì—… ì§€ì› í”„ë¡œê·¸ë¨ì„ ìµœëŒ€í•œ í™œìš©í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +15, ì¸ë§¥ +20, ì²´ë ¥ -20",
                            result: { work: 15, network: 20, health: -20, marketCap: 0 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "ì„¸ê³„ì ì¸ ë°˜ë„ì²´ ì„í•™ Dr. Kimì´ ì‚¼ì„± í•©ë¥˜ë¥¼ ê³ ë ¤í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì—°ë´‰ì´ ì—° 50ì–µì›ì…ë‹ˆë‹¤. ê·¸ì˜ ê¸°ìˆ ë ¥ì´ ìˆìœ¼ë©´ HBM5ë¥¼ 2ë…„ ì•ë‹¹ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€ì¥ë‹˜ íŒë‹¨ì— ë§¡ê¸°ê² ìŠµë‹ˆë‹¤. ì±…ì„ì§€ì‹¤ ìˆ˜ ìˆìŠµë‹ˆê¹Œ?",
                    choices: [
                        {
                            text: "ì˜ì…ì„ ê°•ë ¥íˆ ì¶”ì§„í•©ë‹ˆë‹¤. ê·¸ì˜ ê¸°ìˆ ë ¥ì€ ê·¸ ì´ìƒì˜ ê°€ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +40, ì¸ë§¥ +25, ì²´ë ¥ -25",
                            result: { work: 40, network: 25, health: -25, marketCap: 80 }
                        },
                        {
                            text: "ë‚´ë¶€ ì¸ì¬ ìœ¡ì„±ì— ì§‘ì¤‘í•˜ê² ìŠµë‹ˆë‹¤. ìš°ë¦¬ íŒ€ì˜ ì ì¬ë ¥ì„ ë¯¿ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +20, ì¸ë§¥ +30, ì²´ë ¥ -10",
                            result: { work: 20, network: 30, health: -10, marketCap: 40 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "ë¶€ì¥ë‹˜, ì„ì› ìŠ¹ì§„ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì¶•í•˜í•©ë‹ˆë‹¤! HBM4 ì–‘ì‚°ì´ ë³¸ê²©í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ìœ¨ 90% ë‹¬ì„±! ë‰´ìŠ¤: 'ì‚¼ì„±ì „ì, HBM4 ì–‘ì‚° ì„±ê³µ... ì—”ë¹„ë””ì•„ ì°¨ì„¸ëŒ€ GPUì— ë…ì  ê³µê¸‰' ì´ì œ ê²½ì˜ì§„ì˜ ì¼ì›ìœ¼ë¡œì„œ íšŒì‚¬ì˜ ë¯¸ë˜ë¥¼ í•¨ê»˜ ë§Œë“¤ì–´ê°‘ì‹œë‹¤.",
                    choices: [
                        {
                            text: "HBM5 ê°œë°œê³¼ ì°¨ì„¸ëŒ€ AI ì¹© ë©”ëª¨ë¦¬ ì—°êµ¬ë¥¼ ë™ì‹œì— ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤!",
                            effect: "ì—…ë¬´ +45, ì¸ë§¥ +30, ì²´ë ¥ -30",
                            result: { work: 45, network: 30, health: -30, hbm: 4, marketCap: 150 }
                        },
                        {
                            text: "ì§€ì† ê°€ëŠ¥í•œ ì„±ì¥ ì „ëµì„ ìˆ˜ë¦½í•˜ê³  ì°¨ì„¸ëŒ€ ë¦¬ë”ë“¤ì„ ìœ¡ì„±í•˜ê² ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +35, ì¸ë§¥ +40, ì²´ë ¥ -20",
                            result: { work: 35, network: 40, health: -20, hbm: 4, marketCap: 150 }
                        }
                    ]
                }
            ],
            5: [ // ì„ì›
                {
                    character: 'executive',
                    dialogue: "ì´ì œ ìš°ë¦¬ê°€ ì„¸ê³„ ë©”ëª¨ë¦¬ ì‹œì¥ì„ ë¦¬ë“œí•´ì•¼ í•©ë‹ˆë‹¤. CTO ì§ì† ë¶€ì‚¬ì¥ìœ¼ë¡œì„œ ë°˜ë„ì²´ ì‚¬ì—… ì „ëµì„ ì´ê´„í•˜ê²Œ ë©ë‹ˆë‹¤. ë¶€ì‚¬ì¥ë‹˜ê»˜ ê¸°ëŒ€ê°€ í½ë‹ˆë‹¤.",
                    choices: [
                        {
                            text: "HBM ì‹œì¥ ì§€ë°°ë ¥ ê°•í™”ì— ì§‘ì¤‘í•©ë‹ˆë‹¤. ì‹œì¥ ì ìœ ìœ¨ 70% ëª©í‘œ!",
                            effect: "ì—…ë¬´ +45, ì¸ë§¥ +25, ì²´ë ¥ -35",
                            result: { work: 45, network: 25, health: -35, marketCap: 120 }
                        },
                        {
                            text: "HBMê³¼ ì°¨ì„¸ëŒ€ ê¸°ìˆ  í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ê· í˜•ìˆê²Œ ë°œì „ì‹œí‚µë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +40, ì¸ë§¥ +35, ì²´ë ¥ -25",
                            result: { work: 40, network: 35, health: -25, marketCap: 120 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "í–¥í›„ 10ë…„ì„ ê²°ì •í•  ê¸°ìˆ  íˆ¬ì ë°©í–¥ì„ ë…¼ì˜í•©ë‹ˆë‹¤. ì˜µì…˜ A: GAA íŠ¸ëœì§€ìŠ¤í„° ê¸°ìˆ ì— 15ì¡° íˆ¬ì. ì˜µì…˜ B: 3D íŒ¨í‚¤ì§• ë° Chiplet ê¸°ìˆ ì— 15ì¡° íˆ¬ì. ë¶€ì‚¬ì¥ë‹˜, ì—…ê³„ ìµœê³  ì „ë¬¸ê°€ë¡œì„œ ì˜ê²¬ì„ ì£¼ì‹œì£ .",
                    choices: [
                        {
                            text: "GAA ê¸°ìˆ  íˆ¬ìë¥¼ ì§€ì§€í•©ë‹ˆë‹¤. ë¯¸ì„¸ê³µì •ì´ ë°˜ë„ì²´ì˜ ê·¼ë³¸ì…ë‹ˆë‹¤. TSMCì™€ì˜ ê²©ì°¨ë¥¼ ì¤„ì—¬ì•¼ í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +40, ì¸ë§¥ +20, ì²´ë ¥ -30",
                            result: { work: 40, network: 20, health: -30, marketCap: 100 }
                        },
                        {
                            text: "3D íŒ¨í‚¤ì§•ì— íˆ¬ìí•´ì•¼ í•©ë‹ˆë‹¤. ë¬´ì–´ì˜ ë²•ì¹™ì´ í•œê³„ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤. ë¯¸ë˜ëŠ” íŒ¨í‚¤ì§•ì…ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +45, ì¸ë§¥ +25, ì²´ë ¥ -30",
                            result: { work: 45, network: 25, health: -30, marketCap: 120 }
                        },
                        {
                            text: "ë‘ ê¸°ìˆ  ëª¨ë‘ ì¤‘ìš”í•©ë‹ˆë‹¤. ê°ê° 7.5ì¡°ì”© ë¶„ì‚° íˆ¬ìí•˜ê³ , ì‹œì¥ ë°˜ì‘ì„ ë³´ë©° ì¡°ì •í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +35, ì¸ë§¥ +30, ì²´ë ¥ -25",
                            result: { work: 35, network: 30, health: -25, marketCap: 90 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "Samsungì˜ HBM4 í’ˆì§ˆ, ì¸ìƒì ì…ë‹ˆë‹¤. 5ë…„ ì¥ê¸° ê³µê¸‰ê³„ì•½ì„ ì²´ê²°í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¡°ê±´ì´ ìˆìŠµë‹ˆë‹¤. ê°€ê²©ì„ 20% ë‚®ì¶°ì£¼ì‹œê³ , R&D ì •ë³´ë¥¼ ì¼ë¶€ ê³µìœ í•´ ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤. - ì—”ë¹„ë””ì•„ CEO ì  ìŠ¨ í™©",
                    choices: [
                        {
                            text: "ê°€ê²©ì€ 10% ì¸í•˜, R&D ê³µìœ ëŠ” ê±°ë¶€í•©ë‹ˆë‹¤. ìš°ë¦¬ì˜ ê¸°ìˆ  ì£¼ê¶Œì€ ì–‘ë³´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +40, ì¸ë§¥ +30, ì²´ë ¥ -30",
                            result: { work: 40, network: 30, health: -30, marketCap: 150 }
                        },
                        {
                            text: "ì¡°ê±´ì„ ìˆ˜ìš©í•©ë‹ˆë‹¤. ì—”ë¹„ë””ì•„ì™€ì˜ íŒŒíŠ¸ë„ˆì‹­ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¥ê¸°ì ìœ¼ë¡œ ì´ìµì…ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +30, ì¸ë§¥ +40, ì²´ë ¥ -25",
                            result: { work: 30, network: 40, health: -25, marketCap: 180 }
                        },
                        {
                            text: "ë…ì  ê³„ì•½ ëŒ€ì‹  í”„ë¦¬ë¯¸ì—„ ê°€ê²©ìœ¼ë¡œ ê³µê¸‰í•˜ê² ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‹¤ë¥¸ ê³ ê°ì‚¬ë„ í™•ë³´í•´ì•¼ í•©ë‹ˆë‹¤.",
                            effect: "ì—…ë¬´ +45, ì¸ë§¥ +25, ì²´ë ¥ -30",
                            result: { work: 45, network: 25, health: -30, marketCap: 130 }
                        }
                    ]
                },
                {
                    character: 'executive',
                    dialogue: "ë¶€ì‚¬ì¥ë‹˜ ë•ë¶„ì…ë‹ˆë‹¤. ì •ë§ ê³ ìƒ ë§ìœ¼ì…¨ìŠµë‹ˆë‹¤. ë‰´ìŠ¤ ì†ë³´: ì‚¼ì„±ì „ì, ì‹œê°€ì´ì•¡ ì²œì¡°ì› ëŒíŒŒ! ì„¸ê³„ 2ìœ„ ê¸°ì—… ë“±ê·¹! 10ë…„ ì „ ë©´ì ‘ì¥ì—ì„œ 'ì‹¤íŒ¨í•œ ì¡°ì§'ì´ë¼ê³  ë¶ˆë ¸ë˜ ì‚¼ì„±ì „ì... ê·¸ ëª¨ë“  ê²ƒì„ ì´ê²¨ë‚´ê³  ë§ˆì¹¨ë‚´ ì´ ìˆœê°„ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.",
                    choices: [
                        {
                            text: "ì•„ë‹™ë‹ˆë‹¤. ìš°ë¦¬ ëª¨ë‘ì˜ ë…¸ë ¥ì´ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ì„¸ê³„ 1ìœ„ë¥¼ í–¥í•´ ë‚˜ì•„ê°‘ì‹œë‹¤!",
                            effect: "ì—…ë¬´ +50, ì¸ë§¥ +50, ì²´ë ¥ +50",
                            result: { work: 50, network: 50, health: 50, marketCap: 0 }
                        }
                    ]
                }
            ]
        };

        function showCharacter(charKey) {
            const container = document.getElementById('characterContainer');
            container.innerHTML = '';

            const char = characters[charKey];
            if (!char) return;

            const avatar = document.createElement('div');
            avatar.className = `character-avatar ${char.class}`;
            avatar.innerHTML = `
                <div class="character-body"></div>
                <div class="character-name">${char.name}</div>
            `;

            container.appendChild(avatar);
        }

        function startGame() {
            initAudio();
            playSound('select');
            startMusicLoop(); // ë°°ê²½ìŒì•… ë£¨í”„ ì‹œì‘
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            updateUI();
            showEvent();
        }

        function updateUI() {
            document.getElementById('workStat').textContent = Math.max(0, gameState.work);
            document.getElementById('networkStat').textContent = Math.max(0, gameState.network);
            document.getElementById('healthStat').textContent = Math.max(0, gameState.health);

            document.getElementById('workBar').style.width = Math.max(0, Math.min(100, gameState.work)) + '%';
            document.getElementById('networkBar').style.width = Math.max(0, Math.min(100, gameState.network)) + '%';
            document.getElementById('healthBar').style.width = Math.max(0, Math.min(100, gameState.health)) + '%';

            document.getElementById('currentRank').textContent = ranks[gameState.rank + 1];
            document.getElementById('hbmProgress').textContent = hbmStages[gameState.hbmLevel];
            document.getElementById('marketCap').textContent = gameState.marketCap + 'ì¡°ì›';

            const totalEvents = (events[gameState.rank] || []).length;
            document.getElementById('eventProgress').textContent = `${gameState.eventsCompletedInRank}/${totalEvents}`;
        }

        function showEvent() {
            const rankEvents = events[gameState.rank];
            if (!rankEvents || rankEvents.length === 0) {
                gameWin();
                return;
            }

            const event = rankEvents[gameState.currentEventIndex];
            if (!event) {
                promote();
                return;
            }

            // ìºë¦­í„° í‘œì‹œ
            showCharacter(event.character);

            // ëŒ€í™” í‘œì‹œ
            const charName = characters[event.character]?.name || '???';
            document.getElementById('speakerName').textContent = charName;
            document.getElementById('dialogueText').textContent = event.dialogue;

            // ì„ íƒì§€ í‘œì‹œ
            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';

            event.choices.forEach((choice) => {
                const button = document.createElement('button');
                button.className = 'choice-button';
                button.innerHTML = choice.text; // ì„ íƒ ì „ì—” íš¨ê³¼ë¥¼ ìˆ¨ê¹€
                button.onclick = () => {
                    playSound('select');
                    makeChoice(choice.result, choice.effect);
                };
                choicesContainer.appendChild(button);
            });
        }

        function showStatChangeNotification(effectText) {
            const notification = document.createElement('div');
            notification.className = 'stat-notification';
            notification.innerHTML = `
                <div class="stat-notification-content">
                    <div class="stat-notification-title">ê²°ê³¼</div>
                    <div class="stat-notification-effect">${effectText}</div>
                </div>
            `;
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.95);
                color: white;
                padding: 30px 40px;
                border-radius: 15px;
                border: 3px solid #0066cc;
                box-shadow: 0 10px 40px rgba(0, 102, 204, 0.5);
                z-index: 10000;
                animation: fadeIn 0.3s;
                text-align: center;
                font-family: inherit;
            `;

            const titleStyle = notification.querySelector('.stat-notification-title');
            titleStyle.style.cssText = `
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 15px;
                color: #00d4ff;
            `;

            const effectStyle = notification.querySelector('.stat-notification-effect');
            effectStyle.style.cssText = `
                font-size: 20px;
                line-height: 1.6;
                color: #fff;
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        function makeChoice(result, effectText) {
            // ìŠ¤íƒ¯ ë³€í™” í‘œì‹œ
            showStatChangeNotification(effectText);

            // ìŠ¤íƒ¯ ì—…ë°ì´íŠ¸ëŠ” ì•Œë¦¼ì´ ì‚¬ë¼ì§„ í›„
            setTimeout(() => {
                gameState.work += result.work || 0;
                gameState.network += result.network || 0;
                gameState.health += result.health || 0;

                if (result.hbm !== undefined) gameState.hbmLevel = result.hbm;
                if (result.marketCap !== undefined) gameState.marketCap += result.marketCap;

                if (gameState.work <= 0) {
                    playSound('fail');
                    gameOver("ì—…ë¬´ëŠ¥ë ¥ì´ ë°”ë‹¥ë‚¬ìŠµë‹ˆë‹¤.");
                    return;
                }
                if (gameState.network <= 0) {
                    playSound('fail');
                    gameOver("ì¸ë§¥ì´ ë°”ë‹¥ë‚¬ìŠµë‹ˆë‹¤.");
                    return;
                }
                if (gameState.health <= 0) {
                    playSound('fail');
                    gameOver("ì²´ë ¥ì´ ë°”ë‹¥ë‚¬ìŠµë‹ˆë‹¤.");
                    return;
                }

                gameState.eventsCompletedInRank++;
                gameState.currentEventIndex++;

                if (gameState.eventsCompletedInRank >= events[gameState.rank].length) {
                    if (gameState.rank < 5) {
                        playSound('success');
                        promote();
                    } else {
                        playSound('success');
                        gameWin();
                    }
                } else {
                    updateUI();
                    showEvent();
                }
            }, 2200); // ì•Œë¦¼ì´ í‘œì‹œëœ í›„
        }

        function promote() {
            // ìŠ¹ì§„ ì‹¬ì‚¬ ê¸°ì¤€ (ì§ê¸‰ë³„ ìµœì†Œ ì—…ë¬´ëŠ¥ë ¥ ìš”êµ¬ì‚¬í•­)
            const promotionRequirements = {
                '-1': 40,  // ì‚¬ì› â†’ ëŒ€ë¦¬
                '0': 50,   // ëŒ€ë¦¬ â†’ ê³¼ì¥
                '1': 60,   // ê³¼ì¥ â†’ ì°¨ì¥
                '2': 70,   // ì°¨ì¥ â†’ ë¶€ì¥
                '3': 80    // ë¶€ì¥ â†’ ì„ì›
            };

            const requiredWork = promotionRequirements[gameState.rank];

            // ìŠ¹ì§„ ì‹¬ì‚¬ ì‹¤íŒ¨
            if (requiredWork && gameState.work < requiredWork) {
                playSound('fail');
                const nextRank = ranks[gameState.rank + 2]; // ìŠ¹ì§„í•˜ë ¤ë˜ ì§ê¸‰
                gameOver(`ìŠ¹ì§„ ì‹¬ì‚¬ íƒˆë½\n\n${nextRank} ìŠ¹ì§„ì— í•„ìš”í•œ ì—…ë¬´ëŠ¥ë ¥: ${requiredWork}\ní˜„ì¬ ì—…ë¬´ëŠ¥ë ¥: ${Math.floor(gameState.work)}\n\nì—…ë¬´ ì„±ê³¼ê°€ ë¶€ì¡±í•˜ì—¬ ìŠ¹ì§„ì—ì„œ íƒˆë½í–ˆìŠµë‹ˆë‹¤.`);
                return;
            }

            gameState.rank++;
            gameState.currentEventIndex = 0;
            gameState.eventsCompletedInRank = 0;

            // ìŠ¹ì§„ ì‹œ ì²´ë ¥ íšŒë³µ! (ë°¸ëŸ°ìŠ¤ ì¡°ì •)
            const healthRecovery = 30;
            gameState.health = Math.min(100, gameState.health + healthRecovery);

            // ìŠ¹ì§„ íŒ¬íŒŒë ˆ ì¬ìƒ!
            playPromotionFanfare();

            const animation = document.createElement('div');
            animation.className = 'promotion-animation';
            animation.innerHTML = `
                <div class="promotion-content">
                    <div class="promotion-text">ğŸ‰ ìŠ¹ì§„ì„ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</div>
                    <div class="promotion-rank">${ranks[gameState.rank + 1]}</div>
                    <div class="promotion-bonus">â¤ï¸ ì²´ë ¥ +${healthRecovery} íšŒë³µ!</div>
                </div>
            `;
            document.body.appendChild(animation);

            setTimeout(() => {
                animation.remove();
                updateUI();
                showEvent();
            }, 3000);
        }

        function gameOver(reason) {
            const scene = document.querySelector('.visual-novel-scene');
            scene.innerHTML = `
                <div class="game-over-panel">
                    <div class="game-over-title">ğŸ’” GAME OVER</div>
                    <div class="game-over-reason">${reason}<br><br>
                        ìµœì¢… ì§ê¸‰: <strong>${ranks[gameState.rank + 1]}</strong><br>
                        ì‹œê°€ì´ì•¡: <strong>${gameState.marketCap}ì¡°ì›</strong>
                    </div>
                    <button class="restart-button" onclick="location.reload()">Retry</button>
                </div>
            `;
        }

        function gameWin() {
            const scene = document.querySelector('.visual-novel-scene');
            scene.innerHTML = `
                <div class="ending-panel">
                    <div class="ending-title">ğŸ† PERFECT CLEAR! ğŸ†</div>
                    <div class="ending-description">
                        ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì‹ ì€ ì‚¼ì„±ì „ìì˜ ì„ì›ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!<br><br>
                        <strong>âœ… HBM4 ê°œë°œ ì„±ê³µ</strong><br>
                        <strong>âœ… ì‹œê°€ì´ì•¡ ${gameState.marketCap}ì¡°ì› ë‹¬ì„±</strong><br><br>
                        <em>"ì‹ ì…ì‚¬ì› í•˜ë‚˜ë¥¼ í‚¤ìš°ëŠ” ë°ëŠ” ì •ë§ë¡œ ì˜¨ ë§ˆì„ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤."</em>
                    </div>
                    <button class="restart-button" onclick="location.reload()">Play Again</button>
                </div>
            `;
        }
    </script>
</body>
</html>
